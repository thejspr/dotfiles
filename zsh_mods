export HISTCONTROL=ignoreboth:erasedups
export EDITOR='nvim'
export BUNDLER_EDITOR='nvim'
export PATH="$PATH:$PWD/bin:/home/jesper/.local/bin:/home/jesper/.yarn/bin:/home/jesper/.cargo/bin:/home/jesper/bin"
export PATH=$PATH:/home/jesper/apps
export LESS='-F -g -i -M -R -S -w -X -z-4'
export NODEJS_CHECK_SIGNATURES=no
export ASDF_RUBY_BUILD_VERSION=master

autoload zmv
bindkey -e
unalias gbr # exists in bin

# [ -x "$(command -v xset)" ] && xset r rate 250 40
# [ -x "$(command -v setxkbmap)" ] && setxkbmap -option caps:ctrl_modifier
# if [ ! -f /tmp/xinit ]; then
  setxkbmap -layout us
  setxkbmap -option ctrl:nocaps
  setxkbmap -option caps:ctrl_modifier
  xset s off
  xset -dpms
  xset r rate 250 40
  touch /tmp/xinit
# fi
[ -x "$(command -v xmodmap)" ] && xmodmap ~/.Xmodmap
[ -f /usr/share/z/z.sh ] && source /usr/share/z/z.sh
setopt HIST_FIND_NO_DUPS
setopt HIST_IGNORE_DUPS

export FZF_DEFAULT_COMMAND='rg --files --hidden --follow --glob "!.git/*" --sort accessed'
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# Go
export ASDF_GOLANG_MOD_VERSION_ENABLED=true
[ -f ~/.asdf/plugins/golang/set-env.zsh ] && source ~/.asdf/plugins/golang/set-env.zsh

# hub alias
[ -x "$(command -v hub)" ] && eval "$(hub alias -s)"

# Alias and function definitions.
. ~/.aliases
. ~/.secrets

fancy-ctrl-z () {
  if [[ $#BUFFER -eq 0 ]]; then
    BUFFER="fg"
    zle accept-line
  else
    zle push-input
    zle clear-screen
  fi
}
zle -N fancy-ctrl-z
bindkey '^Z' fancy-ctrl-z

GPG_TTY=$(tty)
export GPG_TTY

if [ ! -S ~/.ssh/ssh_auth_sock ]; then
  eval `ssh-agent`
  ln -sf "$SSH_AUTH_SOCK" ~/.ssh/ssh_auth_sock
fi
export SSH_AUTH_SOCK=~/.ssh/ssh_auth_sock
ssh-add -l > /dev/null || ssh-add

eval "$(github-copilot-cli alias -- "$0")"
[ -x "$(command -v atuin)" ] && eval "$(atuin init zsh --disable-up-arrow)"
eval "$(direnv hook zsh)"
